---
import type { MenuItemDefinition } from '../utils/menu-item-definition';
import type { NavBarSettings } from '../utils/nav-bar-settings';
import Hamburger from './Hamburger.astro';
import MainMenu from './MainMenu.astro';

export interface Props {
    // class: string;
    settings: NavBarSettings;
    menuItemDefinitions: readonly MenuItemDefinition[];
    // rest?: unknown;
};

const { settings, menuItemDefinitions } = Astro.props;
// const { class: className, settings, menuItemDefinitions, ...rest } = Astro.props;
// <nav class:list={['navbar', className]} {...rest}>
---

<nav class="navbar">
    <div class="navbar-narrow-left-slot">
        <slot name="narrow-left" />
    </div>

    <div class="navbar-wide-left-slot">
        <slot name="wide-left" />
    </div>

    <MainMenu settings={settings}, menuItemDefinitions={menuItemDefinitions} />
    <div class="narrow-heading-slot">
        <slot name="narrow-heading" />
    </div>

    <div class="navbar-wide-right-slot">
        <slot name="wide-right" />
    </div>
    <Hamburger settings={settings} />
</nav>

<style define:vars={{
    navBarBackgroundColor: settings.navBarBackgroundColor,
    navBarMargin: settings.navBarMargin,
    navBarPadding: settings.navBarPadding,
    navBarWideLeftSlotFlex: settings.navBarWideLeftSlotFlex,
    navBarWideRightSlotFlex: settings.navBarWideRightSlotFlex,
    narrowMainMenuFontSize: settings.narrowMainMenuFontSize,
}}>
    .navbar {
        width: 100%;
        position: relative;
        background-color: var(--navBarBackgroundColor, #d0dae0);
        margin: var(--navBarMargin, 0);
        padding: var(--navBarPadding, 0);
        display: flex;
        align-items: center;
        justify-content: space-between;

        > .narrow-heading-slot {
            display: none;
        }

        > .navbar-narrow-left-slot {
            display: none;
        }

        > .navbar-wide-left-slot {
            display: flex;
            align-items: center;
            flex: var(--navBarWideLeftSlotFlex, 0 0 auto);
        }

        > .navbar-wide-right-slot {
            display: flex;
            align-items: center;
            flex: var(--navBarWideRightSlotFlex, 0 0 auto);
        }

        /* Make sure lines up with @media in MainMenu and BranchMenuItem */
        @media screen and (width < 32rem) {
            > .narrow-heading-slot {
                display: flex;
                align-items: center;
            }

            > .navbar-narrow-left-slot {
                display: flex;
                align-items: center;
            }

            > .navbar-wide-left-slot {
                display: none;
            }

            > .navbar-wide-right-slot {
                display: none;
            }

            > .hamburger {
                display: block;
                pointer-events: all;

                &.active {
                    font-size: var(--narrowMainMenuFontSize, 1.2em);
                    padding:
                }
            }
        }
    }
</style>

<script>
    import '../scripts/menu-click-processor';
</script>
